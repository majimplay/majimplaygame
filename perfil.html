<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="RocketCake">
    <title></title>
    <link rel="stylesheet" type="text/css" href="perfil.css">
</head>
<body>
    <div class="textstyle1">
        <span class="textstyle2"><br/></span>
        <div id="container_f645165">
            <div id="container_f645165_padding">
                <div class="textstyle1">
                    <span class="textstyle2">Cliente</span>
                    <input type="text" id="cliente" name="cliente" />
                    <span class="textstyle2">CPF</span>
                    <input type="text" id="cpf" name="cpf" />
                    <span class="textstyle2">Telefone</span>
                    <input type="text" id="tel" name="tel" />
                    <span class="textstyle2">CEP</span>
                    <input type="text" id="cep" name="cep" />
                    <span class="textstyle2">Logradouro</span>
                    <input type="text" id="logradouro" name="logradouro" />
                    <span class="textstyle2">Cidade</span>
                    <input type="text" id="cidade" name="cidade" />
                    <span class="textstyle2">Estado</span>
                    <input type="text" id="estado" name="estado" />
                    <span class="textstyle2">Bairro</span>
                    <input type="text" id="bairro" name="bairro" />
                    <input type="button" id="enviar" value="Enviar" />
                </div>
                <div style="clear:both"></div>
            </div>
        </div>
        <div id="statusMessage"></div>
    </div>

    <script>
        // Substitua pela URL real do seu script Google Apps Script para clientes
        const CLIENT_SHEET_URL = 'https://script.google.com/macros/s/AKfycbxqcYDQhj7lwxF6cVKhjWlgu09E6gxPu64sYcT0zsO-h3VuYknHxmlRBSeKpaJBBDfIoQ-g/exec'; // Exemplo: 'https://script.google.com/macros/s/...'
               
        function saveToClient(clientData) {
    if (!GOOGLE_SHEET_APP_URL || GOOGLE_SHEET_APP_URL === 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL') {
        console.warn('Google Apps Script URL not configured. Skipping sheet save.');
        statusMessageDiv.textContent = 'Login bem-sucedido (salvamento em planilha desativado - URL não configurada).';
        return;
    }
    statusMessageDiv.textContent = 'Enviando dados para a planilha...'; // Mensagem ajustada
     console.log(userData);
    fetch(GOOGLE_SHEET_APP_URL, {
        method: 'POST',
        // ***** MUDANÇA AQUI: usar 'no-cors' *****
        mode: 'no-cors',
        cache: 'no-cache',
        headers: {
            // Content-Type ainda é útil, mesmo que a resposta não seja lida
           'Content-Type': 'application/json',
        },
      body: JSON.stringify({
     cliente: document.getElementById('cliente').value,
                cpf: document.getElementById('cpf').value,
                tel: document.getElementById('tel').value,
                cep: document.getElementById('cep').value,
                logradouro: document.getElementById('logradouro').value,
                cidade: document.getElementById('cidade').value,
                estado: document.getElementById('estado').value,
                bairro: document.getElementById('bairro').value
})
    })
    .then(response => {
        // Com 'no-cors', a resposta é sempre 'opaque' e não podemos ler o status ou corpo.
        // Assumimos que o envio foi bem-sucedido se não houver erro de rede imediato.
        console.log('Request sent to Apps Script (mode: no-cors). Response is opaque.');
        statusMessageDiv.textContent = 'Login bem-sucedido! (Dados enviados para planilha - verifique a planilha).';
        // Não podemos confirmar o sucesso real aqui, apenas que a requisição foi enviada.
    })
    .catch((error) => {
        // Erros aqui são geralmente problemas de rede (DNS, offline) ou bloqueios mais severos.
        console.error('Error sending data to Google Sheet (no-cors mode):', error);
        statusMessageDiv.textContent = `Login bem-sucedido, mas falha ao enviar dados para a planilha: ${error.message}. Verifique a conexão ou configurações de rede.`;
    });
}





        
        document.getElementById('enviar').addEventListener('click', () => {
            var clientData = {
                cliente: document.getElementById('cliente').value,
                cpf: document.getElementById('cpf').value,
                tel: document.getElementById('tel').value,
                cep: document.getElementById('cep').value,
                logradouro: document.getElementById('logradouro').value,
                cidade: document.getElementById('cidade').value,
                estado: document.getElementById('estado').value,
                bairro: document.getElementById('bairro').value
            };
               saveToClient(clientData);
        }
    </script>
</body>
</html>
