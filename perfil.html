<!DOCTYPE html>
<html> 
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="generator" content="RocketCake">
	<title></title>
	<link rel="stylesheet" type="text/css" href="perfil.css">
</head>
<body>
<div class="textstyle1">
<span class="textstyle2"><br/></span><div id="container_f645165"><div id="container_f645165_padding" ><div class="textstyle1">  <span class="textstyle2">   cliente       <br/><br/>   </span>
<input type="text" value="" title="" name="TextEdit2"  id="edit_5f0116bc" >
  <span class="textstyle2"> cpf          </span>
<input type="text" value="" title="" name="TextEdit1"  id="edit_15ec8179" >
<span class="textstyle2"> tel                      <br/></span><span class="textstyle2"><br/><br/>   </span><input type="text" value="" title="" name="TextEdit3"  id="edit_4915d68c" >
  <span class="textstyle2"> cep         </span>
<input type="text" value="" title="" name="TextEdit4"  id="edit_30ba40bc" >
  <span class="textstyle2"> Logradouro<br/><br/>   </span>
<input type="text" value="" title="" name="TextEdit6"  id="edit_65b495a2" >
  <span class="textstyle2"> Cidade    </span>
<input type="text" value="" title="" name="TextEdit7"  id="edit_3f14847d" >
  <span class="textstyle2">  Estado        </span>
<input name="enviarcliente" type="submit" value="enviar" title=""  id="button_2fe25639" >
  <span class="textstyle2"><br/>   <br/>   </span>
<input type="text" value="" title="" name="TextEdit5"  id="edit_7912be8c" >
  <span class="textstyle2">  Bairro<br/><br/></span>
</div>
<div style="clear:both"></div></div></div><span class="textstyle2"><br/><br/><br/><br/><br/><br/><br/><br/><br/></span>  </div>

<script>
// Adicione esta nova constante para a URL da planilha de clientes
const CLIENT_SHEET_URL = 'SUA_URL_APPS_SCRIPT_PARA_CLIENTES';
const GOOGLE_SHEET_APP_URL = 'https://script.google.com/macros/s/AKfycbzsZTv9V5arv6AaUfrX3EuIrOa37vJIsU6tPlrY6hTsvihUOhR-qhgf4knwPX5SxRi5-Q/exec'; // Sua URL
// Adicione esta função para enviar dados do cliente
function saveClientToSheet(clientData) {
    if (!CLIENT_SHEET_URL) {
        console.error('URL da planilha de clientes não configurada');
        return;
    }

    fetch(CLIENT_SHEET_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(clientData)
    })
    .then(() => {
        console.log('Dados do cliente enviados');
        document.getElementById('statusMessage').textContent = 'Dados salvos com sucesso!';
    })
    .catch(error => {
        console.error('Erro ao enviar dados do cliente:', error);
        document.getElementById('statusMessage').textContent = 'Erro ao salvar dados!';
    });
}

// Adicione este listener para o iframe de perfil
window.addEventListener('message', (event) => {
    if (event.data.type === 'SUBMIT_CLIENT_DATA') {
        const userData = JSON.parse(localStorage.getItem(USER_DATA_KEY));
        const decodedToken = jwtDecode(userData);
        
        const clientData = {
            userId: decodedToken.sub,
            ...event.data.formData
        };
        
        saveClientToSheet(clientData);
    }
});

	
</script>
	
</body>
</html>
